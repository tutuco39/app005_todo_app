<h1><%= action_name == "completed" ? "完了済みタスク" : "ToDo（未完了）" %></h1>

<nav style="margin: 8px 0 16px;">
  <% if action_name == "completed" %>
    <%= link_to "未完了へ", memos_path %> |
    <%= link_to "新規作成", new_memos_path %>
  <% else %>
    <%= link_to "完了済みを見る", completed_memos_path %> |
    <%= link_to "新規作成", new_memo_path %>
  <% end %>
</nav>

<table>
  <thead>
    <tr>
      <th>完了</th>
      <th>タイトル</th>
      <th>期日</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% @memos.each do |memo| %>
      <tr>
        <td>
          <%= button_to toggle_memo_path(memo), method: :patch, form: { data: { turbo_confirm: nil } } do %>
            <input type="checkbox" <%= "checked" if memo.completed %> onclick="return false;">
          <% end %>
        </td>
        <td><%= link_to memo.title, edit_memo_path(memo) %></td>
        <td><%= memo.due_on&.strftime("%Y-%m-%d") || "-" %></td>
        <td>
          <%= link_to "削除", memo, data: { turbo_method: :delete, turbo_confirm: "削除しますか？" } %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<% if @memos.empty? %>
  <p>表示するタスクはありません。</p>
<% end %>

