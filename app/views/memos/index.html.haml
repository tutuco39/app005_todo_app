%h1= action_name == "completed" ? "完了済みメモ" : "ToDoメモ（未完了）"

%nav{ style: "margin:8px 0 16px;" }
  - if action_name == "completed"
    = link_to "未完了へ", memos_path
    %span= " | "
    = link_to "新規作成", new_memo_path
  - else
    = link_to "完了済みを見る", completed_memos_path
    %span= " | "
    = link_to "新規作成", new_memo_path

%table
  %thead
    %tr
      %th 完了
      %th タイトル
      %th 期日
      %th
  %tbody
    - @memos.each do |memo|
      %tr
        %td
          = button_to toggle_memo_path(memo), method: :patch, form: { data: { turbo_confirm: nil } } do
            %input{ type: "checkbox", checked: memo.completed, onclick: "return false;" }
        %td= link_to memo.title, edit_memo_path(memo)
        - overdue_style = memo.respond_to?(:overdue?) && memo.overdue? ? "color:red;font-weight:bold;" : nil
        %td{ style: overdue_style }= memo.due_on&.strftime("%Y-%m-%d") || "-"
        %td= link_to "削除", memo, data: { turbo_method: :delete, turbo_confirm: "削除しますか？" }

- if @memos.empty?
  %p 表示するメモはありません。
