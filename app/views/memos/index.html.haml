.header
  %h1.title
    = action_name == "completed" ? "完了済ToDo" : "ToDo（未完了）"
    -# 件数バッジを出したい場合はコントローラで @incomplete_count / @completed_count を用意して…
    - if defined?(@incomplete_count) && action_name != "completed"
      %span.pill 未完了 #{@incomplete_count}
    - if defined?(@completed_count) && action_name == "completed"
      %span.pill 完了 #{@completed_count}

  .toolbar
    - if action_name == "completed"
      = link_to "未完了", memos_path, class: "btn btn-ghost"
      = link_to "新規作成", new_memo_path, class: "btn btn-primary"
    - else
      = link_to "完了済", completed_memos_path, class: "btn"
      = link_to "新規作成", new_memo_path, class: "btn btn-primary"

.card
  %table.table
    %thead
      %tr
        %th 完了
        %th タイトル
        %th 期日
        %th
    %tbody
      - @memos.each do |memo|
        %tr
          %td.checkbox
            = button_to toggle_memo_path(memo), method: :patch, form: { data: { turbo_confirm: nil } } do
              %input{ type: "checkbox", checked: memo.completed, onclick: "return false;" }
          %td= link_to memo.title, edit_memo_path(memo)
          - overdue_class = memo.respond_to?(:overdue?) && memo.overdue? ? "due overdue" : "due"
          %td{ class: overdue_class }= memo.due_on&.strftime("%Y-%m-%d") || "-"
          %td.actions
            = link_to "削除", memo, class: "btn btn-small btn-danger", data: { turbo_method: :delete, turbo_confirm: "削除しますか？" }

- if @memos.empty?
  %p.empty 表示するメモはありません。

